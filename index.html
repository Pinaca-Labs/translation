

<!DOCTYPE html>
<html>
<head>
  <title>Pinaca Translation</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>


  <style>
    #resultJSON:empty {display: none}
  
    #loader {
      z-index:1000;
      border: 5px solid #f3f3f3;
      border-radius: 50%;
      border-top: 5px solid #1e93e0;
      width: 40px;
      height: 40px;
      position: absolute;
      top: 20%;
      left: 50%;
      -webkit-animation: spin 1s linear infinite;
      /* Safari */
      animation: spin 1s linear infinite;
    }
  
    /* Safari */
  
    @-webkit-keyframes spin {
      0% {
        -webkit-transform: rotate(0deg);
      }
      100% {
        -webkit-transform: rotate(360deg);
      }
    }
  
    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
  </style>
  
  
  <script>
    function parseQuery(e) {
      text_query = $('#queryInput').val();
      var dropdown_val = $('#menu1').val();
  
      if(dropdown_val == "" || text_query == "" || text_query ==" "){
        $(".errorlist").css("display","block");
        $('#loader').hide();
        setTimeout(fade_out, 2000);
          function fade_out() {
          $(".errorlist").fadeOut();
        }
        return;
      }
  
      query = text_query.split("~")
      $('#loader').show();
  
      let payload = {
        data: query,
      };
      const headers = {
        'Content-Type': 'application/json',
      }
      if(dropdown_val == "English - Telugu"){
          url = 'http://127.0.0.1:8080/async'
          dropdown_change_call(url, payload, headers);
      }
      else if(dropdown_val == "English - Tamil"){
          url = 'http://127.0.0.1:8080/async1'
          dropdown_change_call(url, payload, headers);
      }
      else if(dropdown_val == "English - Malayalam"){
          url = 'http://127.0.0.1:8080/async2'
          dropdown_change_call(url, payload, headers);
      }
      else if(dropdown_val == "English - Kannada"){
          url = 'http://127.0.0.1:8080/async3'
          dropdown_change_call(url, payload, headers);
      }
      else if(dropdown_val == "English - Marathi"){
          url = 'http://127.0.0.1:8080/async4'
          dropdown_change_call(url, payload, headers);
      }
      else if(dropdown_val == "English - Hindi"){
          url = 'http://127.0.0.1:8080/async5'
          dropdown_change_call(url, payload, headers);
      }
      else if(dropdown_val == "English - Bengali"){
          url = 'http://127.0.0.1:8080/async6'
          dropdown_change_call(url, payload, headers);
      }
      else if(dropdown_val == "English - Punjabi"){
          url = 'http://127.0.0.1:8080/async7'
          dropdown_change_call(url, payload, headers);
      }
      else if(dropdown_val == "English - Gujarati"){
          url = 'http://127.0.0.1:8080/async8'
          dropdown_change_call(url, payload, headers);
      }
      else if(dropdown_val == "Chinese - English"){
          url = 'http://127.0.0.1:8080/async9'
          dropdown_change_call(url, payload, headers);
      }
      else if(dropdown_val == "Tamil - English"){
          url = 'http://127.0.0.1:8080/async10'
          dropdown_change_call(url, payload, headers);
      }
    }
  
    function dropdown_change_call(url, payload, header){
      axios.post(url, payload,{headers: header})
      .then((response) => {
          if (response.data) {
              let res_payload = {
              unique_id: response.data.unique_id
              };
              result_call(res_payload, header)
          }
      })
    .catch((err) => {
      $('#loader').hide();
      })
  }
  
    function result_call(payload, head){
    var inter = setInterval(()=>{
      axios.post('http://127.0.0.1:8080/result', payload,{headers: head})
      .then((response) => {
        if (response.data) {
          processResponse(response.data.prediction)
          clearInterval(inter);
        }
      })
    },500)
    }
      function processResponse(data) {
        var resd = JSON.stringify(data, undefined, 2);
        var tes = JSON.parse(resd);
        $('#loader').hide();
        $('#resultJSON').html(tes[0]);
      }
  
      window.onload = function() {
          $('#loader').hide();
      };
  
      $(function(){
        $(".dropdown-menu li a").click(function(){
          $(".btn:first-child").text($(this).text());
          $(".btn:first-child").val($(this).text());
        });
    });
  
  </script>
  
  
<div style="width: 60%; text-align:center; position: absolute; left: 20%; top: 10%;">
  <img style="height: 150px; width: 50%;" src="https://raw.githubusercontent.com/Pinaca-Labs/translation/main/Pinaca_Lab_Final-01.png" id="img1" >
    <div>
      <h4 class="errorlist" style="display: none; color: red; text-align: center;">Please give input and select Language</h4>
        <textarea style="top:20px" type="textarea" class="form-control" id="queryInput" placeholder="Pinaca Labs translation demo. "> </textarea>
        
        <div id="dropDownDiv" class="dropdown" style="top:10px; position: relative; float: left;" >
            <button class="btn btn-primary dropdown-toggle" id="menu1" type="button" data-toggle="dropdown">Select Language
            <span class="caret"></span></button>
            <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
              <li role="presentation"><a role="menuitem" tabindex="-1" href="#">English - Telugu</a></li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="#">English - Tamil</a></li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="#">English - Malayalam</a></li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="#">English - Kannada</a></li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="#">English - Marathi</a></li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="#">English - Hindi</a></li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="#">English - Bengali</a></li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="#">English - Punjabi</a></li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="#">English - Gujarati</a></li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Chinese - English</a></li>
	      <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Tamil - English</a></li>
            </ul>

            <button class="btn btn-primary" type="button" onclick="parseQuery()">Translate</button>
        </div>

	      <div class="col-sm-12" style="top:30px; position: relative;"> <pre id='resultJSON'></pre> </div>

    </div>

    <div style="top:1%; position: relative;" id="loader"></div>

</div>
  
  
  </body>
  </html> 
